<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Disease Prediction</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    
    /* Loading overlay animations */
    #loading-overlay { 
      opacity: 0; 
      visibility: hidden; 
      transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
    #loading-overlay.visible { opacity: 1; visibility: visible; }
    
    /* Stethoscope animation */
    .stethoscope-animate {
      animation: stethoscope-pulse 2s ease-in-out infinite alternate;
    }
    
    @keyframes stethoscope-pulse {
      0% { transform: scale(1) rotate(0deg); opacity: 0.8; }
      100% { transform: scale(1.1) rotate(5deg); opacity: 1; }
    }
    
    /* Heartbeat animation */
    .heartbeat {
      animation: heartbeat 1.5s ease-in-out infinite;
    }
    
    @keyframes heartbeat {
      0%, 20%, 40%, 60%, 80%, 100% {
        transform: scale(1);
      }
      10%, 30% {
        transform: scale(1.2);
      }
      50%, 70% {
        transform: scale(1.1);
      }
    }
    
    /* ECG Line animation */
    .ecg-line {
      stroke-dasharray: 1000;
      stroke-dashoffset: 1000;
      animation: ecg-draw 3s ease-in-out infinite;
    }
    
    @keyframes ecg-draw {
      0% { stroke-dashoffset: 1000; }
      50% { stroke-dashoffset: 0; }
      100% { stroke-dashoffset: -1000; }
    }
    
    /* Medical cross rotation */
    .medical-cross {
      animation: rotate-pulse 3s linear infinite;
    }
    
    @keyframes rotate-pulse {
      0% { transform: rotate(0deg) scale(1); }
      25% { transform: rotate(90deg) scale(1.1); }
      50% { transform: rotate(180deg) scale(1); }
      75% { transform: rotate(270deg) scale(1.1); }
      100% { transform: rotate(360deg) scale(1); }
    }
    
    /* Floating particles */
    .particle {
      animation: float 6s ease-in-out infinite;
    }
    
    .particle:nth-child(odd) {
      animation-delay: -2s;
    }
    
    .particle:nth-child(even) {
      animation-delay: -4s;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.5; }
      50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
    }
    
    /* Loading text fade */
    .loading-text {
      animation: text-fade 2s ease-in-out infinite;
    }
    
    @keyframes text-fade {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }
  </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">

  <!-- Enhanced Loading Overlay -->
  <div id="loading-overlay" class="fixed inset-0 z-50 flex flex-col items-center justify-center visible">
    <!-- Background particles -->
    <div class="absolute inset-0 overflow-hidden">
      <div class="particle absolute top-1/4 left-1/4 w-2 h-2 bg-white rounded-full opacity-30"></div>
      <div class="particle absolute top-1/3 right-1/4 w-3 h-3 bg-blue-200 rounded-full opacity-40"></div>
      <div class="particle absolute bottom-1/4 left-1/3 w-2 h-2 bg-white rounded-full opacity-35"></div>
      <div class="particle absolute bottom-1/3 right-1/3 w-3 h-3 bg-blue-200 rounded-full opacity-45"></div>
      <div class="particle absolute top-1/2 left-1/5 w-2 h-2 bg-white rounded-full opacity-25"></div>
      <div class="particle absolute top-2/3 right-1/5 w-3 h-3 bg-blue-200 rounded-full opacity-50"></div>
    </div>
    
    <div class="flex items-center justify-center space-x-8 mb-8">
      <!-- Stethoscope Icon -->
      <div class="stethoscope-animate">
        <svg class="h-20 w-20 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
          <circle cx="18" cy="18" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
          <path d="M15 18h6" stroke="currentColor" stroke-width="2"/>
        </svg>
      </div>
      
      <!-- Heart with heartbeat -->
      <div class="heartbeat">
        <svg class="h-16 w-16 text-red-300" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5 2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"/>
        </svg>
      </div>
      
      <!-- Medical Cross -->
      <div class="medical-cross">
        <svg class="h-18 w-18 text-green-300" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
          <path d="M17,13H13V17H11V13H7V11H11V7H13V11H17V13Z"/>
          <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20Z"/>
        </svg>
      </div>
    </div>
    
    <!-- ECG Line Animation -->
    <div class="mb-6">
      <svg width="300" height="60" viewBox="0 0 300 60">
        <path class="ecg-line" stroke="white" stroke-width="2" fill="none" 
              d="M0,30 L50,30 L55,10 L65,50 L70,20 L75,40 L80,30 L130,30 L135,10 L145,50 L150,20 L155,40 L160,30 L210,30 L215,10 L225,50 L230,20 L235,40 L240,30 L300,30"/>
      </svg>
    </div>
    
    <!-- Loading Text -->
    <p id="loading-text" class="text-white font-semibold text-xl loading-text">Loading Medical System...</p>
    
    <!-- Progress indicator -->
    <div class="mt-6 w-64 h-2 bg-white bg-opacity-30 rounded-full overflow-hidden">
      <div id="progress-bar" class="h-full bg-white rounded-full transition-all duration-1000 ease-out" style="width: 0%"></div>
    </div>
  </div>

  <!-- Main container -->
  <div class="container bg-white w-full max-w-4xl mx-auto my-8 p-8 rounded-2xl shadow-lg">

    <!-- Header -->
    <header class="text-center mb-8">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-800">Disease Prediction System</h1>
      <p class="text-gray-500 mt-2">Select your symptoms below to get a prediction.</p>
    </header>

    <!-- Symptom Form -->
    <form method="POST">
      <div class="symptoms-container max-h-96 overflow-y-auto p-6 bg-gray-50 border border-gray-200 rounded-lg grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 mb-8">
        {% for symptom in symptoms %}
          <label class="flex items-center p-3 border border-gray-200 bg-white rounded-lg cursor-pointer hover:bg-blue-50 hover:border-blue-400 transition-all duration-200">
            <input type="checkbox" name="symptoms" value="{{ symptom }}" class="h-5 w-5 rounded text-blue-600 focus:ring-blue-500 border-gray-300">
            <span class="ml-3 text-gray-700 font-medium">{{ symptom }}</span>
          </label>
        {% endfor %}
      </div>
      <button class="btn w-full py-3 px-4 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition-all" type="submit"> Predict Disease </button>
    </form>
 
    <!-- Show selected symptoms -->
    {% if selected_symptoms %}
    <div class="mt-8 bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg text-blue-800">
      <h2 class="text-lg font-semibold">You selected the following symptoms:</h2>
      <ul class="mt-2 list-disc list-inside text-left">
        {% for s in selected_symptoms %}
          <li>{{ s }}</li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}

    <!-- Prediction result -->
    {% if predictions %}
    <div class="prediction mt-6 text-center bg-red-100 border-l-4 border-red-500 text-red-800 p-4 rounded-lg">
      <h2 class="text-xl font-bold">Prediction Result</h2>
      <p class="text-lg mt-2">You might be suffering from one of the following:</p>
      <p class="text-lg mt-4 font-semibold">
  {% for disease, prob in predictions %}
    {{ disease }}{% if not loop.last %}, {% endif %}
  {% endfor %}
</p>  
    </div>

    <!-- Book Appointment Button -->
    <div class="mt-8 text-center">
      <a href="https://health-care-vj5p.onrender.com/bookings/new" target="_blank"
         class="block w-full py-4 px-6 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-bold text-lg rounded-xl shadow-lg hover:from-blue-700 hover:to-blue-800">
         Book Appointment Now!
      </a>
    </div>
    {% endif %}
  </div>

  <!-- JavaScript -->
  <script>
    const form = document.querySelector('form');
    const loadingOverlay = document.getElementById('loading-overlay');
    const loadingText = document.getElementById('loading-text');
    const progressBar = document.getElementById('progress-bar');
    
    // Initial loading animation (5 seconds)
    window.addEventListener('load', () => {
      // Animate progress bar
      let progress = 0;
      const progressInterval = setInterval(() => {
        progress += 2;
        progressBar.style.width = progress + '%';
        if (progress >= 100) {
          clearInterval(progressInterval);
        }
      }, 100);
              
      // Hide loading after 5 seconds
      setTimeout(() => {
        if (loadingOverlay) loadingOverlay.classList.remove('visible');
      }, 5000);
    });

    // Form submission handling
    if (form && loadingOverlay) {
      form.addEventListener('submit', function() {
        // Change loading text and reset progress
        const loadingTextElement = loadingOverlay.querySelector('#loading-text');
        const progressBarElement = loadingOverlay.querySelector('#progress-bar');
        
        if (loadingTextElement) loadingTextElement.textContent = 'Analyzing symptoms...';
        if (progressBarElement) progressBarElement.style.width = '0%';
        
        // Show loading overlay
        loadingOverlay.classList.add('visible');
        
        // Animate progress bar for analysis
        let progress = 0;
        const analysisInterval = setInterval(() => {
          progress += 2;
          if (progressBarElement) progressBarElement.style.width = progress + '%';
          if (progress >= 100) {
            clearInterval(analysisInterval);
          }
        }, 100);
        
        // Hide loading after 5 seconds - let Flask handle the actual form submission
        setTimeout(() => {
          loadingOverlay.classList.remove('visible');
        }, 5000);
      });
    }
  </script>
<script>
  window.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".symptom-label").forEach(el => {
      el.textContent = el.textContent.replace(/([a-z])([A-Z])/g, '$1 $2');
    });
  });
</script>
                                                                          
</body>
</html>   
   


